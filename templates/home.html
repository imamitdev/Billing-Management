{% extends 'base.html' %} 
{% load static %}
{% block content %}

<div class="page-wrapper">
  <div class="content container-fluid">
    <div class="row">
      <div class="col-xl-3 col-sm-6 col-12">
        <div class="card">
          <div class="card-body">
            <div class="dash-widget-header">
              <span class="dash-widget-icon bg-2">
                <i class="fas fa-users"></i>
              </span>
              <div class="dash-count">
                <div class="dash-title">Customers</div>
                <div class="dash-counts">
                  <p>{{customers}}</p>
                </div>
              </div>
            </div>
            <div class="progress progress-sm mt-3">
              <div
                class="progress-bar bg-6"
                role="progressbar"
                style="width: 65%"
                aria-valuenow="75"
                aria-valuemin="0"
                aria-valuemax="100"
              ></div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-3 col-sm-6 col-12">
        <div class="card">
          <div class="card-body">
            <div class="dash-widget-header">
              <span class="dash-widget-icon bg-3">
                <i class="fas fa-file-alt"></i>
              </span>
              <div class="dash-count">
                <div class="dash-title">Invoices</div>
                <div class="dash-counts">
                  <p>{{total_invoices}}</p>
                </div>
              </div>
            </div>
            <div class="progress progress-sm mt-3">
              <div
                class="progress-bar bg-7"
                role="progressbar"
                style="width: 85%"
                aria-valuenow="75"
                aria-valuemin="0"
                aria-valuemax="100"
              ></div>
            </div>
          </div>
        </div>
      </div>

      <div class="col-xl-3 col-sm-6 col-12">
        <div class="card">
          <div class="card-body">
            <div class="dash-widget-header">
              <span class="dash-widget-icon bg-1">
                <i class="fas fa-rupee-sign"></i>
              </span>
              <div class="dash-count">
                <div class="dash-title">Total Amount</div>
                <div class="dash-counts">
                  <p>{{total_amount}}</p>
                </div>
              </div>
            </div>
            <div class="progress progress-sm mt-3">
              <div
                class="progress-bar bg-5"
                role="progressbar"
                style="width: 75%"
                aria-valuenow="75"
                aria-valuemin="0"
                aria-valuemax="100"
              ></div>
            </div>
            {% comment %}
            <p class="text-muted mt-3 mb-0">
              <span class="text-danger me-1"
                ><i class="fas fa-arrow-down me-1"></i>1.15%</span
              >
              since last week
            </p>
            {% endcomment %}
          </div>
        </div>
      </div>

      <div class="col-xl-3 col-sm-6 col-12">
        <div class="card">
          <div class="card-body">
            <div class="dash-widget-header">
              <span class="dash-widget-icon bg-1">
                <i class="fas fa-rupee-sign"></i>
              </span>
              <div class="dash-count">
                <div class="dash-title">Paid Amount</div>
                <div class="dash-counts">
                  <p>{{total_paid_amount}}</p>
                </div>
              </div>
            </div>
            <div class="progress progress-sm mt-3">
              <div
                class="progress-bar bg-5"
                role="progressbar"
                style="width: 75%"
                aria-valuenow="75"
                aria-valuemin="0"
                aria-valuemax="100"
              ></div>
            </div>
            {% comment %}
            <p class="text-muted mt-3 mb-0">
              <span class="text-danger me-1"
                ><i class="fas fa-arrow-down me-1"></i>1.15%</span
              >
              since last week
            </p>
            {% endcomment %}
          </div>
        </div>
      </div>

      <div class="col-xl-3 col-sm-6 col-12">
        <div class="card">
          <div class="card-body">
            <div class="dash-widget-header">
              <span class="dash-widget-icon bg-4">
                <i class="fas fa-rupee-sign"></i>
              </span>
              <div class="dash-count">
                <div class="dash-title">Due Amount</div>
                <div class="dash-counts">
                  <p>{{total_due_amount}}</p>
                </div>
              </div>
            </div>
            <div class="progress progress-sm mt-3">
              <div
                class="progress-bar bg-8"
                role="progressbar"
                style="width: 45%"
                aria-valuenow="75"
                aria-valuemin="0"
                aria-valuemax="100"
              ></div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-3 col-sm-6 col-12">
        <div class="card">
          <div class="card-body">
            <div class="dash-widget-header">
              <span class="dash-widget-icon bg-2">
                <i class="fas fa-rupee-sign"></i>
              </span>
              <div class="dash-count">
                <div class="dash-title">Current Month Amount</div>
                <div class="dash-counts">
                  <p>{{current_month_amount}}</p>
                </div>
              </div>
            </div>
            <div class="progress progress-sm mt-3">
              <div
                class="progress-bar bg-6"
                role="progressbar"
                style="width: 65%"
                aria-valuenow="75"
                aria-valuemin="0"
                aria-valuemax="100"
              ></div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-3 col-sm-6 col-12">
        <div class="card">
          <div class="card-body">
            <div class="dash-widget-header">
              <span class="dash-widget-icon bg-2">
                <i class="fas fa-rupee-sign"></i>
              </span>
              <div class="dash-count">
                <div class="dash-title">Previous Month Amount</div>
                <div class="dash-counts">
                  <p>{{previous_month_amount}}</p>
                </div>
              </div>
            </div>
            <div class="progress progress-sm mt-3">
              <div
                class="progress-bar bg-6"
                role="progressbar"
                style="width: 65%"
                aria-valuenow="75"
                aria-valuemin="0"
                aria-valuemax="100"
              ></div>
            </div>
          </div>
        </div>
      </div>
<div class="col-xl-3 col-sm-6 col-12">
        <div class="card">
          <div class="card-body">
            <div class="dash-widget-header">
              <span class="dash-widget-icon bg-3">
                <i class="fas fa-rupee-sign"></i>
              </span>
              <div class="dash-count">
                <div class="dash-title">Current Month Paid Amount</div>
                <div class="dash-counts">
                  <p>{{ current_month_paid_amount }}</p>
                </div>
              </div>
            </div>
            <div class="progress progress-sm mt-3">
              <div
                class="progress-bar bg-7"
                role="progressbar"
                style="width: 65%"
                aria-valuenow="75"
                aria-valuemin="0"
                aria-valuemax="100"
              ></div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <div class="row">
      <div class="col-md-6 col-sm-6">
        <div class="card">
          <div class="card-header">
            <div class="row">
              <div class="col">
                <h5 class="card-title">Recent Invoices</h5>
              </div>
              <div class="col-auto">
                <a
                  href="{% url 'invoice_list' %}"
                  class="btn-right btn btn-sm btn-outline-primary"
                >
                  View All
                </a>
              </div>
            </div>
          </div>
          <div class="card-body">
            <div class="mb-3">
              <div class="progress progress-md rounded-pill mb-3">
                <div
                  class="progress-bar bg-success"
                  role="progressbar"
                  style="width: 47%"
                  aria-valuenow="47"
                  aria-valuemin="0"
                  aria-valuemax="100"
                ></div>
                <div
                  class="progress-bar bg-warning"
                  role="progressbar"
                  style="width: 28%"
                  aria-valuenow="28"
                  aria-valuemin="0"
                  aria-valuemax="100"
                ></div>
                <div
                  class="progress-bar bg-danger"
                  role="progressbar"
                  style="width: 15%"
                  aria-valuenow="15"
                  aria-valuemin="0"
                  aria-valuemax="100"
                ></div>
                <div
                  class="progress-bar bg-info"
                  role="progressbar"
                  style="width: 10%"
                  aria-valuenow="10"
                  aria-valuemin="0"
                  aria-valuemax="100"
                ></div>
              </div>
              <div class="row">
                <div class="col-auto">
                  <i class="fas fa-circle text-success me-1"></i> Paid
                </div>
                <div class="col-auto">
                  <i class="fas fa-circle text-warning me-1"></i> Unpaid
                </div>
                <div class="col-auto">
                  <i class="fas fa-circle text-danger me-1"></i> Overdue
                </div>
                <div class="col-auto">
                  <i class="fas fa-circle text-info me-1"></i> Draft
                </div>
              </div>
            </div>
            <div class="table-responsive">
              <table class="table table-stripped table-hover">
                <thead class="thead-light">
                  <tr>
                    <th>Invoice</th>

                    <th>Customer</th>
                    <th>Amount</th>
                    <th>Paid Amount</th>
                    {% comment %}
                    <th class="text-right">Action</th>
                    {% endcomment %}
                  </tr>
                </thead>
                <tbody>
                  {% for item in recent_invoices %}

                  <tr>
                    <td>{{item.id}}</td>
                    <td>
                      <h2 class="table-avatar">{{item.customer.customer_name}}</h2>
                    </td>
                    <td>{{item.total_amount}}</td>
                    <td>{{item.paid_amount}}</td>
       
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-6 col-sm-6">
        <div class="card">
          <div class="card-header">
            <div class="row">
              <div class="col">
                <h5 class="card-title">Today Collection</h5>
              </div>
              <div class="col-auto">
                <a
                  href="{% url "today_payments_report" %}"
                  class="btn-right btn btn-sm btn-outline-primary"
                >
                  View All
                </a>
              </div>
            </div>
          </div>
          <div class="card-body">
            <div class="mb-3">
              <div class="row">
                <div class="col-auto">
                  Today Collection:-  {{total_payment}}
                </div>
              
              </div>
              <div class="progress progress-md rounded-pill mb-3">
                <div
                  class="progress-bar bg-success"
                  role="progressbar"
                  style="width: 39%"
                  aria-valuenow="39"
                  aria-valuemin="0"
                  aria-valuemax="100"
                ></div>
                <div
                  class="progress-bar bg-danger"
                  role="progressbar"
                  style="width: 35%"
                  aria-valuenow="35"
                  aria-valuemin="0"
                  aria-valuemax="100"
                ></div>
                <div
                  class="progress-bar bg-warning"
                  role="progressbar"
                  style="width: 26%"
                  aria-valuenow="26"
                  aria-valuemin="0"
                  aria-valuemax="100"
                ></div>

              </div>
             
            </div>
            <div class="table-responsive">
              <table class="table table-hover">
                <thead class="thead-light">
                  <tr>
                    <th>Invoice</th>

                    <th>Customer</th>
                    <th> Date</th>
                    <th>Amount</th>
                  </tr>
                </thead>
                <tbody>
                  {% for today in today_payments %}
                  
                  <tr>
                    <td>{{today.invoice.id}}</td>

                    <td>
                      <h2 class="table-avatar">
                      
{{today.invoice.customer.customer_name}}                      </h2>
                    </td>
                    <td>{{today.payment_date}}</td>
                    <td>{{today.amount}}</td>
                
                  </tr>
  
                  
                  {% endfor %}

                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock content %}
